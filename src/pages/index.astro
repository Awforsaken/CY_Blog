---
import Layout from "../layouts/Layout.astro";
import { contentfulClient } from "../lib/contentful";
import type { BlogPost } from "../lib/contentful";  

const entries = await contentfulClient.getEntries<BlogPost>({
	content_type: "post",
});

const posts = entries.items.map((item) => {
	const { title, date, content,tagging, } = item.fields;
	return {
		title,
		content,
		date,
		tagging,
	};
});
---

<Layout title="CY_blog">
	<main class="space-y-4  mx-auto max-w-3xl mx-4">
		<h1 class="text-5xl crt font-bold text-center">CY_blog</h1>
		{
			posts.map((post) => (
				<ul data-augmented-ui="both tr-clip bl-clip " class="p-8">
					<h2 class="text-2xl underline">{post.title}</h2>
					<time class="bg-amber-600 px-2 pt-1 pb-1 text-sm rounded-lg">
						{post.date}
					</time>
					<p>{post.content}</p>
					<div class="bg-amber-600 px-2 p-1 pr-4 ">{post.tagging}</div>
				</ul>
			))
		}
	</main>
</Layout>
