---
import Layout from "../layouts/Layout.astro";
import { contentfulClient } from "../lib/contentful";
import type { BlogPost } from "../lib/contentful";  

const entries = await contentfulClient.getEntries<BlogPost>({
	content_type: "post",
});

const posts = entries.items.map((item) => {
	const { title, date, content,tagging, } = item.fields;
	return {
		title,
		content,
		date,
		tagging,
	};
});
---

<Layout title="CY_blog">
	<main class="space-y-4  mx-auto max-w-3xl ">
		<h1 class="text-5xl crt font-bold text-center">CY_blog</h1>
		{
			posts.map((post) => (
				<ul data-augmented-ui="inlay tl-2-clip-x br-2-clip-x tr-clip bl-clip" class="p-8 mx-4">
						<h2 class="text-2xl underline inline-block">{post.title}</h2>

					<p>{post.content}</p>
					
					<div data-augmented-ui="l-clip tr-clip br-clip" class="bg-black text-yellow-400 text-sm py-1 px-5">
						{post.tagging}
					</div>
					<time class=" text-sm text-sky-700 display-block">
						{post.date}
					</time>
				</ul>
			))
		}
	</main>
</Layout>
